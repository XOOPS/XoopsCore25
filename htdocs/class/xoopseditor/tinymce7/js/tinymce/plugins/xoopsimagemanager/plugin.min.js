/**
 * XOOOPS Image Manager plugin
 *
 * @category  XoopsEditor
 * @package   TinyMCE7
 * @author    ForMuss
 * @copyright 2025 XOOPS Project (http://xoops.org)
 * @license   GNU GPL 2 or later (http://www.gnu.org/licenses/gpl-2.0.html)
 * @link      http://xoops.org
 */
!function(){"use strict";tinymce.PluginManager.add("xoopsimagemanager",function(editor,pluginUrl){const openXoopsImageManager=function(callback){editor.windowManager.openUrl({title:"XOOPS Imagemanager",url:pluginUrl+"/xoopsimagemanager.php?target=src",width:800,height:600,onMessage:function(instance,event){"insertImage"===event.mceAction&&event.data.src&&(callback(event.data.src,{title:event.data.title}),instance.close())}})};return editor.xoopsimagemanager_callback=openXoopsImageManager,editor.ui.registry.addButton("xoopsimagemanager",{icon:"image",tooltip:"XOOPS Image Manager",onAction:function(){openXoopsImageManager(function(url,meta){editor.insertContent(editor.dom.createHTML("img",{src:url,alt:meta.title||"",title:meta.title||""}))})}}),{}})}();